---
layout : single
title : "í‚¬ë¡œê·¸"
categories:
  - PoliceAndThief
tags:
  - [Unity, PoliceAndThief, KillLog]

toc: true
toc_sticky: true

Date: 2022-10-05
published: 
---

# ğŸ“Œ KillLog

ì£½ê³  ì£½ì´ëŠ” ê²Œì„ì„ í•˜ë‹¤ë³´ë©´ í‚¬ë¡œê·¸ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì ‘í•˜ê²Œ ëœë‹¤.

ë‚´ í™”ë©´ê³¼ ì  í™”ë©´ì— ì–´ë–»ê²Œ ë„ìš°ëŠ”ê°€ë¥¼ í¬í†¤ì„œë²„ë¥¼ í†µí•´ ì•Œì•„ë³´ì.

## ğŸ“ ë””ìì¸

![1](https://user-images.githubusercontent.com/87271529/193987781-cef81a32-5e81-4cfc-9a93-dfbf3bbc212e.png)

ì¼ë°˜ í‚¬ë¡œê·¸ì™€ ê°™ì´ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ë§Œë“¤ì—ˆìœ¼ë©°

![2](https://user-images.githubusercontent.com/87271529/193987941-6019b3d6-709a-4f64-94ab-e7f6bcb2847f.png)

ê³µê²©í•œ ì‚¬ëŒì˜ ë‹‰ë„¤ì„ê³¼ ê³µê²©ë‹¹í•œ ì‚¬ëŒì˜ ë‹‰ë„¤ì„ì„ í‘œì‹œí•´ì¤€ë‹¤.

## ğŸ“ ì›ë¦¬

ê³µê²©ì„ í•˜ë©´ í”Œë ˆì´ì–´ì˜ ë¬´ê¸° Collider ê°€ On ë˜ë©° Collider ì— ë‹¿ì¸ í”Œë ˆì´ì–´ì˜ TakeDamage ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤.

ì´ ë•Œ ê³µê²©í•œ ì‚¬ëŒì˜ ë‹‰ë„¤ì„ë„ í•¨ê»˜ ì „ë‹¬í•˜ì—¬ í‚¬ë¡œê·¸ë¥¼ ë„ìš´ë‹¤.

í‚¬ë¡œê·¸ëŠ” ëª¨ë“  í”Œë ˆì´ì–´ê°€ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë¯€ë¡œ RPCë¥¼ í†µí•´ ìŠ¤í°í•´ì•¼ í•˜ë©° í‚¬ë¡œê·¸ SetUp ë˜í•œ RPC ë¡œ í•´ì£¼ì–´ì•¼ í•œë‹¤.

### ğŸ“‹ Code

Player ì—ê²Œ ë¶™ì–´ìˆëŠ” Knife
```cs
protected void OnTriggerEnter(Collider other)
{
  if(other.tag == "Player")
  {
    MyPlayer player = other.GetComponent<MyPlayer>();
    player.TakeDamage(GetComponentInParent<MyPlayer>()._NickName);
  }
}
```

ê³µê²©ì„ ë°›ì€ Player
```cs
// ê³µê²©í•œ í”Œë ˆì´ì–´ì˜ ë‹‰ë„¤ì„ì„ ë°›ì•„ì˜´
public void TakeDamage(string attacker)
{
  _pv.RPC("RPC_TakeDamage", RpcTarget.All);
  _pv.RPC("RPC_ShowKillLog", RpcTarget.All, attacker);
}
[PunRPC]
private void RPC_ShowKillLog(string attacker)
{
  if(_pv.IsMine)
  {
    // í’€ë§ ìœ¼ë¡œ ìŠ¤í° => KillLog ì— ìˆëŠ” SetUp ë©”ì†Œë“œë¥¼ ë‹¤ì‹œ RPC ë¡œ ëª¨ë‘ì—ê²Œ ì „ì†¡
    ObjectPooler._Instance.PoolInstantiate("KillLog").GetComponent<PhotonView>().RPC("SetUp", RpcTarget.All, attacker, _nickName);
  }
}
```

KillLog
```cs
// ê³µê²©í•œ í”Œë ˆì´ì–´ì™€ ê³µê²©ë‹¹í•œ í”Œë ˆì´ì–´ ë‹‰ë„¤ì„ì„ ì„¸íŒ…
[Photon.Pun.PunRPC]
public void SetUp(string attacker, string attacked)
{
  _attacker.text = attacker;
  _attacked.text = attacked;
}
```

### ğŸ’» Execute

![3](https://user-images.githubusercontent.com/87271529/193998491-e26fd88f-3428-41d3-9b9c-bbd84c310098.gif)

ì‹¤í–‰ì‹œí‚¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ê³µê²©, í”¼ê²© í”Œë ˆì´ì–´ í™”ë©´ì— ëª¨ë‘ ì˜ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
